{"version":3,"sources":["../lib/generateConfig.js"],"names":["pwd","process","cwd","generateConfig","options","envConfig","env","configToUse","Object","assign","distFiles","resolve","componentsDist","components","srcFiles","componentsSrc","jsonDefaults","showcasePropsJson","componentStyles","info","data","HtmlWebpackPlugin","require","HtmlWebpackHarddiskPlugin","html","title","template","__dirname","filename","alwaysWriteToDisk","files","css","js","hdHelper","plugins","push","alias","displayComponents","displayComponentsSrc","displayComponentsDefaults"],"mappings":";;;;;;AAAA;;;;AAEA;;;;AACA;;;;;;AAEA,IAAMA,MAAMC,QAAQC,GAAR,EAAZ;;AAEA,IAAMC,iBAAiB,SAAjBA,cAAiB,CAAEC,OAAF,EACvB;AACI,QAAMC,YAAc,uBAAWD,QAAQE,GAAnB,CAApB;AACA,QAAMC,cAAcC,OAAOC,MAAP,CAAe,EAAf,EAAmBJ,SAAnB,CAApB;;AAEA,QAAMK,YACF,eAAKC,OAAL,CAAcX,GAAd,EAAmBI,QAAQQ,cAAR,IAA0BR,QAAQS,UAArD,CADJ;;AAGA,QAAMC,WAAW,eAAKH,OAAL,CACbX,GADa,EAEbI,QAAQW,aAAR,IAA4BX,QAAQS,UAApC,SAFa,CAAjB;;AAKA,QAAMG,eAAkB,eAAKL,OAAL,CAAcX,GAAd,EAAmBI,QAAQa,iBAA3B,CAAxB;AACA,QAAMC,kBAAkB,eAAKP,OAAL,CACpBX,GADoB,EAEpBI,QAAQM,SAAR,GAAuBN,QAAQM,SAA/B,mBACON,QAAQS,UADf,qBAFoB,CAAxB;;AAMA,qBAAOM,IAAP,CAAa,0CAAb;AACA,qBAAOA,IAAP,CAAa,0CAAb;AACA,qBAAOA,IAAP,CAAa,0CAAb;AACA,qBAAOC,IAAP,CAAa,QAAb;;AAEA,qBAAOA,IAAP,CAAa,OAAb,EAAsBN,QAAtB;AACA,qBAAOM,IAAP,CAAa,QAAb,EAAuBV,SAAvB;AACA,qBAAOU,IAAP,CAAa,YAAb,EAA2BJ,YAA3B;AACA,qBAAOI,IAAP,CAAa,OAAb,EAAsBF,eAAtB;;AAEA,qBAAOC,IAAP,2CAAqDT,SAArD;;AAEA,QAAMW,oBAAoBC,QAAS,qBAAT,CAA1B;AACA,QAAMC,4BAA4BD,QAAS,8BAAT,CAAlC;;AAEA,QAAME,OAAO,IAAIH,iBAAJ,CACT;AACII,eAAoB,yBADxB;AAEIC,kBAAuBC,SAAvB,yBAFJ;AAGIC,kBAAoB,eAHxB;AAIIC,2BAAoB,IAJxB;AAKIC,eAAoB;AAChBC,iBAAM,CAAE,WAAF,CADU;AAEhBC,gBAAM,CAAE,QAAF;AAFU;AALxB,KADS,CAAb;;AAaA,QAAMC,WAAW,IAAIV,yBAAJ,EAAjB;;AAEAhB,gBAAY2B,OAAZ,CAAoBC,IAApB,CAA0BX,IAA1B;AACAjB,gBAAY2B,OAAZ,CAAoBC,IAApB,CAA0BF,QAA1B;;AAEA;AACA1B,gBAAYI,OAAZ,CAAoByB,KAApB,CAA0BC,iBAA1B,GAAsD3B,SAAtD;AACAH,gBAAYI,OAAZ,CAAoByB,KAApB,CAA0BE,oBAA1B,GAAsDxB,QAAtD;AACAP,gBAAYI,OAAZ,CAAoByB,KAApB,CAA0BG,yBAA1B,GAAsDvB,YAAtD;;AAEA,WAAOT,WAAP;AACH,CA3DD;;kBA6DeJ,c","file":"generateConfig.js","sourcesContent":["import path      from 'path';\n\nimport logger    from './logger';\nimport getConfig from '../webpack.config';\n\nconst pwd = process.cwd();\n\nconst generateConfig = ( options ) =>\n{\n    const envConfig   = getConfig( options.env );\n    const configToUse = Object.assign( {}, envConfig );\n\n    const distFiles =\n        path.resolve( pwd, options.componentsDist || options.components );\n\n    const srcFiles = path.resolve(\n        pwd,\n        options.componentsSrc || `${options.components}/src`\n    );\n\n    const jsonDefaults    = path.resolve( pwd, options.showcasePropsJson );\n    const componentStyles = path.resolve(\n        pwd,\n        options.distFiles ? `${options.distFiles}/styles.css` :\n            `${options.components}/dist/styles.css`\n    );\n\n    logger.info( '****************************************' );\n    logger.info( '*****  Generating Lochness Config  *****' );\n    logger.info( '****************************************' );\n    logger.data( 'Using:' );\n\n    logger.data( 'src: ', srcFiles );\n    logger.data( 'dist: ', distFiles );\n    logger.data( 'defaults: ', jsonDefaults );\n    logger.data( 'css: ', componentStyles );\n\n    logger.info( `Lochness Serving Display Components: ${distFiles}` );\n\n    const HtmlWebpackPlugin = require( 'html-webpack-plugin' );\n    const HtmlWebpackHarddiskPlugin = require( 'html-webpack-harddisk-plugin' );\n\n    const html = new HtmlWebpackPlugin(\n        {\n            title             : 'LochNess: Check your UI',\n            template          : `${__dirname}/../src/template.ejs`,\n            filename          : '../index.html',\n            alwaysWriteToDisk : true,\n            files             : {\n                css : [ 'style.css' ],\n                js  : [ 'app.js' ]\n            }\n        }\n    );\n\n    const hdHelper = new HtmlWebpackHarddiskPlugin();\n\n    configToUse.plugins.push( html );\n    configToUse.plugins.push( hdHelper );\n\n    // assume styles.css location for now\n    configToUse.resolve.alias.displayComponents         = distFiles;\n    configToUse.resolve.alias.displayComponentsSrc      = srcFiles;\n    configToUse.resolve.alias.displayComponentsDefaults = jsonDefaults;\n\n    return configToUse;\n};\n\nexport default generateConfig;\n"]}